<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"
        content="Hannes Rosenbusch writes psychological fiction exploring the afterlife, university life, and parapsychology. Discover Laboratory and Dormitory - compelling dark, humorous novels.">
    <title>Hannes Rosenbusch - Psychological Fiction Author</title>
    <style>
        html,
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            width: 100%;
            height: 100%;
            background: black;
        }

        canvas {
            display: block;
        }
    </style>
</head>

<body>
    <script type="module">
        import * as PIXI from "https://cdn.jsdelivr.net/npm/pixi.js@8.x/dist/pixi.mjs";
        import { BlurFilter } from "https://cdn.jsdelivr.net/npm/pixi.js@8.x/dist/pixi.mjs";

        const nonHoverColor = 0x55ff55;
        const hoverColor = 0x00ff00;

        // --- Initialize PixiJS ---
        const app = new PIXI.Application();
        await app.init({ resizeTo: window, background: "black" });
        document.body.appendChild(app.canvas);

        // --- Load background ---
        const bgTexture = await PIXI.Assets.load("https://raw.githubusercontent.com/hannesrosenbusch/hannesrosenbusch.github.io/refs/heads/master/assets/images/bg.jpeg");
        const bgTexturePullOutBook = await PIXI.Assets.load("https://raw.githubusercontent.com/hannesrosenbusch/hannesrosenbusch.github.io/refs/heads/master/assets/images/bg_pull_out_book.jpg");
        const bgSprite = new PIXI.Sprite(bgTexture);
        const bgPullOutBookSprite = new PIXI.Sprite(bgTexturePullOutBook);
        app.stage.addChild(bgSprite);
        app.stage.addChild(bgTexturePullOutBook);

        // --- Keep aspect ratio (cover) ---
        function resizeBackground() {
            const screenW = app.renderer.width;
            const screenH = app.renderer.height;
            const imageW = bgTexture.width;
            const imageH = bgTexture.height;

            const scale = Math.max(screenW / imageW, screenH / imageH);
            transformSprite(bgSprite, imageW, imageH, scale)
            transformSprite(bgPullOutBookSprite, imageW, imageH, scale)
        }

        function transformSprite(sprite, imageW, imageH, scale) {
            bgSprite.width = imageW * scale;
            bgSprite.height = imageH * scale;
            bgSprite.x = (screenW - bgSprite.width) / 2;
            bgSprite.y = (screenH - bgSprite.height) / 2;
        }

        // --- Define hoverable polygons (image-space coordinates) ---
        const hoverPolygons = [
            [{ "x": 151, "y": 100 }, { "x": 156, "y": 97 }, { "x": 168, "y": 97 }, { "x": 175, "y": 94 }, { "x": 191, "y": 100 }, { "x": 202, "y": 106 }, { "x": 211, "y": 123 }, { "x": 209, "y": 127 }, { "x": 204, "y": 134 }, { "x": 205, "y": 137 }, { "x": 209, "y": 140 }, { "x": 209, "y": 148 }, { "x": 205, "y": 153 }, { "x": 201, "y": 165 }, { "x": 198, "y": 173 }, { "x": 197, "y": 181 }, { "x": 197, "y": 182 }, { "x": 213, "y": 186 }, { "x": 218, "y": 189 }, { "x": 230, "y": 197 }, { "x": 234, "y": 199 }, { "x": 249, "y": 204 }, { "x": 253, "y": 206 }, { "x": 255, "y": 207 }, { "x": 265, "y": 210 }, { "x": 275, "y": 196 }, { "x": 264, "y": 197 }, { "x": 262, "y": 195 }, { "x": 259, "y": 196 }, { "x": 259, "y": 194 }, { "x": 263, "y": 192 }, { "x": 277, "y": 192 }, { "x": 281, "y": 187 }, { "x": 284, "y": 187 }, { "x": 287, "y": 182 }, { "x": 289, "y": 184 }, { "x": 289, "y": 187 }, { "x": 293, "y": 186 }, { "x": 298, "y": 186 }, { "x": 307, "y": 173 }, { "x": 315, "y": 173 }, { "x": 324, "y": 156 }, { "x": 327, "y": 155 }, { "x": 329, "y": 156 }, { "x": 332, "y": 154 }, { "x": 336, "y": 155 }, { "x": 349, "y": 144 }, { "x": 362, "y": 139 }, { "x": 377, "y": 142 }, { "x": 384, "y": 146 }, { "x": 396, "y": 144 }, { "x": 411, "y": 161 }, { "x": 419, "y": 174 }, { "x": 422, "y": 184 }, { "x": 427, "y": 197 }, { "x": 428, "y": 202 }, { "x": 489, "y": 280 }, { "x": 491, "y": 286 }, { "x": 493, "y": 290 }, { "x": 500, "y": 300 }, { "x": 507, "y": 315 }, { "x": 511, "y": 327 }, { "x": 514, "y": 345 }, { "x": 519, "y": 348 }, { "x": 521, "y": 353 }, { "x": 532, "y": 355 }, { "x": 532, "y": 359 }, { "x": 539, "y": 363 }, { "x": 542, "y": 371 }, { "x": 541, "y": 378 }, { "x": 537, "y": 383 }, { "x": 529, "y": 384 }, { "x": 521, "y": 384 }, { "x": 489, "y": 384 }, { "x": 484, "y": 385 }, { "x": 475, "y": 385 }, { "x": 473, "y": 389 }, { "x": 462, "y": 388 }, { "x": 461, "y": 384 }, { "x": 455, "y": 384 }, { "x": 440, "y": 385 }, { "x": 434, "y": 381 }, { "x": 427, "y": 379 }, { "x": 419, "y": 379 }, { "x": 413, "y": 377 }, { "x": 388, "y": 379 }, { "x": 378, "y": 382 }, { "x": 373, "y": 387 }, { "x": 372, "y": 398 }, { "x": 294, "y": 399 }, { "x": 284, "y": 381 }, { "x": 279, "y": 361 }, { "x": 272, "y": 338 }, { "x": 267, "y": 329 }, { "x": 268, "y": 324 }, { "x": 250, "y": 321 }, { "x": 230, "y": 319 }, { "x": 229, "y": 316 }, { "x": 221, "y": 316 }, { "x": 218, "y": 316 }, { "x": 209, "y": 312 }, { "x": 199, "y": 314 }, { "x": 182, "y": 314 }, { "x": 158, "y": 311 }, { "x": 156, "y": 289 }, { "x": 156, "y": 284 }, { "x": 151, "y": 267 }, { "x": 149, "y": 262 }, { "x": 152, "y": 260 }, { "x": 152, "y": 249 }, { "x": 151, "y": 241 }, { "x": 143, "y": 236 }, { "x": 134, "y": 233 }, { "x": 135, "y": 216 }, { "x": 127, "y": 214 }, { "x": 129, "y": 210 }, { "x": 129, "y": 202 }, { "x": 124, "y": 201 }, { "x": 134, "y": 189 }, { "x": 137, "y": 186 }, { "x": 139, "y": 184 }, { "x": 145, "y": 184 }, { "x": 147, "y": 182 }, { "x": 149, "y": 181 }, { "x": 151, "y": 168 }, { "x": 147, "y": 167 }, { "x": 145, "y": 163 }, { "x": 137, "y": 133 }, { "x": 136, "y": 116 }, { "x": 139, "y": 113 }, { "x": 141, "y": 108 }, { "x": 150, "y": 102 }, { "x": 156, "y": 98 }]
        ];

        const polygonGraphics = [];

        // --- Draw polygons with rounded edges ---
        hoverPolygons.forEach(points => {
            const g = new PIXI.Graphics();
            g.filters = [new BlurFilter(2)];
            function drawPolygon(fillColor, alpha) {
                g.clear();
                g.beginFill(fillColor, alpha);
                g.moveTo(points[0].x, points[0].y);
                for (let i = 1; i < points.length; i++) {
                    g.lineTo(points[i].x, points[i].y);
                }
                g.closePath();
                g.endFill();
            }

            drawPolygon(nonHoverColor, 0.25); // initial style

            g.eventMode = "static";
            g.cursor = "pointer";

            g.on("pointerover", () => {
                drawPolygon(hoverColor, 0.3);
                bgSprite.visible = false;
                bgPullOutBookSprite.visible = true;
            });
            g.on("pointerout", () => {
                bgSprite.visible = false;
                bgPullOutBookSprite.visible = true;
                drawPolygon(nonHoverColor, 0.25)
            });

            app.stage.addChild(g);
            polygonGraphics.push({ g, points });
        });

        // --- Scale polygons along with background ---
        function resizePolygons() {
            const scale = bgSprite.width / bgTexture.width;
            const offsetX = bgSprite.x;
            const offsetY = bgSprite.y;

            polygonGraphics.forEach(({ g }) => {
                g.x = offsetX;
                g.y = offsetY;
                g.scale.set(scale);
            });
        }

        // --- Resize handler ---
        function resizeAll() {
            resizeBackground();
            resizePolygons();
        }

        window.addEventListener("resize", resizeAll);
        resizeAll();

    </script>
</body>

</html>