<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"
        content="Hannes Rosenbusch writes psychological fiction exploring the afterlife, university life, and parapsychology. Discover Laboratory and Dormitory - compelling dark, humorous novels.">
    <title>Hannes Rosenbusch - Psychological Fiction Author</title>
    <style>
        html,
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            width: 100%;
            height: 100%;
            background: black;
        }

        canvas {
            display: block;
        }
    </style>
</head>

<body>
    <script type="module">
        import * as PIXI from "https://cdn.jsdelivr.net/npm/pixi.js@8.x/dist/pixi.mjs";
        import { BlurFilter } from "https://cdn.jsdelivr.net/npm/pixi.js@8.x/dist/pixi.mjs";

        // --- Constants ---
        const COLORS = {
            normal: 0x55ff55,
            hover: 0x00ff00,
        };

        // --- Initialize PixiJS ---
        const app = new PIXI.Application();
        await app.init({ resizeTo: window, background: "black" });
        document.body.appendChild(app.canvas);

        // --- Load background textures ---
        const bgTexture = await PIXI.Assets.load(
            "https://raw.githubusercontent.com/hannesrosenbusch/hannesrosenbusch.github.io/refs/heads/master/assets/images/bg.jpeg"
        );
        const bgTexturePullOutBook = await PIXI.Assets.load(
            "https://raw.githubusercontent.com/hannesrosenbusch/hannesrosenbusch.github.io/refs/heads/hover_highlight/assets/images/bg_pull_out_book.jpg"
        );

        const bgSprite = new PIXI.Sprite(bgTexture);
        const bgPullOutBookSprite = new PIXI.Sprite(bgTexturePullOutBook);
        bgPullOutBookSprite.visible = false;

        app.stage.addChild(bgSprite, bgPullOutBookSprite);

        // --- Utility: Keep aspect ratio (cover) ---
        function transformSprite(sprite, texture, screenW, screenH) {
            const imageW = texture.width;
            const imageH = texture.height;
            const scale = Math.max(screenW / imageW, screenH / imageH);
            sprite.width = imageW * scale;
            sprite.height = imageH * scale;
            sprite.x = (screenW - sprite.width) / 2;
            sprite.y = (screenH - sprite.height) / 2;
        }

        function resizeBackground() {
            const { width, height } = app.renderer;
            transformSprite(bgSprite, bgTexture, width, height);
            transformSprite(bgPullOutBookSprite, bgTexturePullOutBook, width, height);
        }

        // --- Hoverable Areas Factory ---
        function createHoverArea({ polygon, onHoverStart, onHoverEnd }) {
            const g = new PIXI.Graphics();
            g.filters = [new BlurFilter(2)];
            g.eventMode = "static";
            g.cursor = "pointer";

            function drawPolygon(color, alpha) {
                g.clear();
                g.beginFill(color, alpha);
                g.moveTo(polygon[0].x, polygon[0].y);
                for (let i = 1; i < polygon.length; i++) {
                    g.lineTo(polygon[i].x, polygon[i].y);
                }
                g.closePath();
                g.endFill();
            }

            // Initial state
            drawPolygon(COLORS.normal, 0.25);

            // Event bindings
            g.on("pointerover", () => {
                drawPolygon(COLORS.hover, 0.3);
                onHoverStart?.();
            });

            g.on("pointerout", () => {
                drawPolygon(COLORS.normal, 0.25);
                onHoverEnd?.();
            });

            app.stage.addChild(g);

            return {
                g,
                polygon,
                drawPolygon,
            };
        }

        // --- Define objects ---
        const hannes = {
            polygon: [{ "x": 151, "y": 100 }, { "x": 156, "y": 97 }, { "x": 168, "y": 97 }, { "x": 175, "y": 94 }, { "x": 191, "y": 100 }, { "x": 202, "y": 106 }, { "x": 211, "y": 123 }, { "x": 209, "y": 127 }, { "x": 204, "y": 134 }, { "x": 205, "y": 137 }, { "x": 209, "y": 140 }, { "x": 209, "y": 148 }, { "x": 205, "y": 153 }, { "x": 201, "y": 165 }, { "x": 198, "y": 173 }, { "x": 197, "y": 181 }, { "x": 197, "y": 182 }, { "x": 213, "y": 186 }, { "x": 218, "y": 189 }, { "x": 230, "y": 197 }, { "x": 234, "y": 199 }, { "x": 249, "y": 204 }, { "x": 253, "y": 206 }, { "x": 255, "y": 207 }, { "x": 265, "y": 210 }, { "x": 275, "y": 196 }, { "x": 264, "y": 197 }, { "x": 262, "y": 195 }, { "x": 259, "y": 196 }, { "x": 259, "y": 194 }, { "x": 263, "y": 192 }, { "x": 277, "y": 192 }, { "x": 281, "y": 187 }, { "x": 284, "y": 187 }, { "x": 287, "y": 182 }, { "x": 289, "y": 184 }, { "x": 289, "y": 187 }, { "x": 293, "y": 186 }, { "x": 298, "y": 186 }, { "x": 307, "y": 173 }, { "x": 315, "y": 173 }, { "x": 324, "y": 156 }, { "x": 327, "y": 155 }, { "x": 329, "y": 156 }, { "x": 332, "y": 154 }, { "x": 336, "y": 155 }, { "x": 349, "y": 144 }, { "x": 362, "y": 139 }, { "x": 377, "y": 142 }, { "x": 384, "y": 146 }, { "x": 396, "y": 144 }, { "x": 411, "y": 161 }, { "x": 419, "y": 174 }, { "x": 422, "y": 184 }, { "x": 427, "y": 197 }, { "x": 428, "y": 202 }, { "x": 489, "y": 280 }, { "x": 491, "y": 286 }, { "x": 493, "y": 290 }, { "x": 500, "y": 300 }, { "x": 507, "y": 315 }, { "x": 511, "y": 327 }, { "x": 514, "y": 345 }, { "x": 519, "y": 348 }, { "x": 521, "y": 353 }, { "x": 532, "y": 355 }, { "x": 532, "y": 359 }, { "x": 539, "y": 363 }, { "x": 542, "y": 371 }, { "x": 541, "y": 378 }, { "x": 537, "y": 383 }, { "x": 529, "y": 384 }, { "x": 521, "y": 384 }, { "x": 489, "y": 384 }, { "x": 484, "y": 385 }, { "x": 475, "y": 385 }, { "x": 473, "y": 389 }, { "x": 462, "y": 388 }, { "x": 461, "y": 384 }, { "x": 455, "y": 384 }, { "x": 440, "y": 385 }, { "x": 434, "y": 381 }, { "x": 427, "y": 379 }, { "x": 419, "y": 379 }, { "x": 413, "y": 377 }, { "x": 388, "y": 379 }, { "x": 378, "y": 382 }, { "x": 373, "y": 387 }, { "x": 372, "y": 398 }, { "x": 294, "y": 399 }, { "x": 284, "y": 381 }, { "x": 279, "y": 361 }, { "x": 272, "y": 338 }, { "x": 267, "y": 329 }, { "x": 268, "y": 324 }, { "x": 250, "y": 321 }, { "x": 230, "y": 319 }, { "x": 229, "y": 316 }, { "x": 221, "y": 316 }, { "x": 218, "y": 316 }, { "x": 209, "y": 312 }, { "x": 199, "y": 314 }, { "x": 182, "y": 314 }, { "x": 158, "y": 311 }, { "x": 156, "y": 289 }, { "x": 156, "y": 284 }, { "x": 151, "y": 267 }, { "x": 149, "y": 262 }, { "x": 152, "y": 260 }, { "x": 152, "y": 249 }, { "x": 151, "y": 241 }, { "x": 143, "y": 236 }, { "x": 134, "y": 233 }, { "x": 135, "y": 216 }, { "x": 127, "y": 214 }, { "x": 129, "y": 210 }, { "x": 129, "y": 202 }, { "x": 124, "y": 201 }, { "x": 134, "y": 189 }, { "x": 137, "y": 186 }, { "x": 139, "y": 184 }, { "x": 145, "y": 184 }, { "x": 147, "y": 182 }, { "x": 149, "y": 181 }, { "x": 151, "y": 168 }, { "x": 147, "y": 167 }, { "x": 145, "y": 163 }, { "x": 137, "y": 133 }, { "x": 136, "y": 116 }, { "x": 139, "y": 113 }, { "x": 141, "y": 108 }, { "x": 150, "y": 102 }, { "x": 156, "y": 98 }],
            graphics: null,
            onHoverStart() {
                // Only highlight, no background change
            },
            onHoverEnd() { },
        };

        const books = {
            polygon: [{ "x": 527, "y": 36 }, { "x": 535, "y": 35 }, { "x": 577, "y": 37 }, { "x": 578, "y": 44 }, { "x": 584, "y": 45 }, { "x": 584, "y": 42 }, { "x": 591, "y": 42 }, { "x": 590, "y": 37 }, { "x": 604, "y": 33 }, { "x": 605, "y": 29 }, { "x": 621, "y": 23 }, { "x": 632, "y": 88 }, { "x": 585, "y": 94 }, { "x": 545, "y": 99 }, { "x": 529, "y": 102 }, { "x": 528, "y": 37 }],
            graphics: null,
            onHoverStart() {
                bgSprite.visible = false;
                bgPullOutBookSprite.visible = true;
            },
            onHoverEnd() {
                bgSprite.visible = true;
                bgPullOutBookSprite.visible = false;
            },
        };

        // --- Initialize areas ---
        hannes.graphics = createHoverArea({
            polygon: hannes.polygon,
            onHoverStart: hannes.onHoverStart,
            onHoverEnd: hannes.onHoverEnd,
        });

        books.graphics = createHoverArea({
            polygon: books.polygon,
            onHoverStart: books.onHoverStart,
            onHoverEnd: books.onHoverEnd,
        });

        // --- Resize polygons ---
        function resizePolygons() {
            const scale = bgSprite.width / bgTexture.width;
            const offsetX = bgSprite.x;
            const offsetY = bgSprite.y;

            for (const obj of [hannes, books]) {
                const g = obj.graphics.g;
                g.x = offsetX;
                g.y = offsetY;
                g.scale.set(scale);
            }
        }

        // --- Resize handler ---
        function resizeAll() {
            resizeBackground();
            resizePolygons();
        }

        window.addEventListener("resize", resizeAll);
        resizeAll();


    </script>
</body>

</html>